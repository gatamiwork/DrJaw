<Window x:Class="DrJaw.Views.Common.UserLogin"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Доктор ювелирка" MinHeight="230" Width="440" SizeToContent="Height"
        WindowStartupLocation="CenterScreen">

    <Window.InputBindings>
        <KeyBinding Key="Enter"  Command="{Binding LoginCommand}"/>
        <KeyBinding Key="Escape" Command="{Binding CancelCommand}"/>
    </Window.InputBindings>

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <TextBlock Grid.Row="0" Style="{StaticResource TitleText}" Text="Выбор пользователя и магазина"/>
        <Grid Grid.Row="1" IsEnabled="{Binding IsNotBusy}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="150"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0" Text="Пользователь:"/>
            <ComboBox  Grid.Row="0" Grid.Column="1"
                 ItemsSource="{Binding Users}"
                 SelectedItem="{Binding SelectedUser}"
                 DisplayMemberPath="Name"/>

            <TextBlock Grid.Row="1" Grid.Column="0" Text="Магазин:"/>
            <ComboBox  Grid.Row="1" Grid.Column="1"
                 ItemsSource="{Binding Marts}"
                 SelectedItem="{Binding SelectedMart}"
                 DisplayMemberPath="Name"/>

            <TextBlock Grid.Row="2" Grid.Column="0" Text="Пароль админа:"
                 Visibility="{Binding IsAdmin, Converter={StaticResource BoolToVis}}"/>
            <PasswordBox x:Name="AdminPwd"
                   Grid.Row="2" Grid.Column="1"
                   Visibility="{Binding IsAdmin, Converter={StaticResource BoolToVis}}"
                   PasswordChanged="AdminPwd_PasswordChanged"/>
        </Grid>
        <Button Grid.Row="2"
            Content="Войти"
            Command="{Binding LoginCommand}"
            IsDefault="True"
            HorizontalAlignment="Stretch" />
        <materialDesign:Snackbar Grid.Row="1"
        MessageQueue="{Binding SnackbarQueue}"
        HorizontalAlignment="Stretch"
        IsHitTestVisible="False" Margin="0"/>
    </Grid>
</Window>
